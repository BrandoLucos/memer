var mongoose = require('mongoose');
var Meme = require('./models/memes.js');

mongoose.Promise = require('bluebird');
mongoose.connect('mongodb://localhost/express-memes');

// our script will not exit until we have disconnected from the db.
function quit() {
  mongoose.disconnect();
  console.log('\nQuitting!');
}

// a simple error handler
function handleError(err) {
  console.log('ERROR:', err);
  quit();
  return err;
}

console.log('removing old memes...');
Meme.remove({})
.then(function() {
  console.log('old memes removed');
  console.log('creating some new memes...');
  var youDontSay     = new Meme({ title: 'You Dont Say',  image: 'http://www.bloodygoodhorror.com/bgh/files/reviews/caps/vampires-kiss.jpg',   genre: 'Sarcastic'});
  var foreverAlone = new Meme({ title: 'Forever Alone', image: 'https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcS5H4vkXOU09xyJRWOZXeTtwYsFFTXk56-RQFZU0vID20Tf6Vac', genre: 'Awkward'});
  var badLuckBrian   = new Meme({ title: 'Bad Luck Brian',  image: 'data:image/jpeg;base64,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'   ,   genre: 'Awkward', rank: });

  return Meme.create([starWars, groundhogDay, terminator]);
})
.then(function(savedMemes) {
  console.log('Just saved', savedMemes.length, 'memes.');
  return Meme.find({});
})
.then(function(allMemes) {
  console.log('Printing all memes:');
  allMemes.forEach(function(meme) {
    console.log(meme);
  });
  quit();
});
